# 图像识别
## 图像识别流水线（Photo OCR pipeline）
- 执行图像识别的步骤
  1. 识别图中哪些位置有文字（`Text Detection`）
  2. 字符切分（`Character segmentation`），将上述有文字的部分切分成若干个字符
  3. 字符分类（`Character classification`），将上述切分过的字符识别为某个字母或者是数字
  4. 拼写纠正（可能存在），将上述识别结果进行错误纠正，如将`c1eaning`纠正为`cleaning`。
- 机器学习任务拆分与团队分工
  - 当完成一个机器学习任务时，将任务进行拆分是完成的关键一步。通常可以将任务拆成有逻辑关系的几部分，每部分对应若干个模块来完成，并分配不同数量的工程师。

## 不同组件是如何工作的？

### `Text Detection`
  - 要识别图片中的哪些位置有我们想要的对象（比如一些字符或者行人），需要使用到`Object Detection`模块。
  - 在识别的过程中，我们面临两个问题：首先我们需要一个训练好的有监督学习模型（一个分类器），来对图像中的一个子集进行识别，判断其是否包含我们想要的对象；其次由于我们想要的对象在图片中的大小可能很不规则，因此我们需要使用滑动窗的概念去查找我们想要的对象。
    1. 有监督学习模型（神经网络分类器）
        - 以一个针对`行人`的分类器为例：
          1. 首先我们需要确定用于训练的图像的标准格式（比如80*40像素的一个子图片），当对图片使用滑动窗选中子集时，需要将这个子集映射成标准格式的图像。
          2. 其次需要收集正例和负例图片，训练一个分类器。
    2. 滑动窗（`sliding window`）
        - 滑动窗用于选中图片的不同子集。滑动窗的尺寸应该有大小不同的多种，以应对图片中不同尺寸的待识别对象。注意的是，虽然滑动窗的尺寸不同，但是当将其投进分类器前需要将其映射到标准格式。
        - 滑动窗的步长：滑动窗滑动的间隔称为滑动窗的步长。越小的步长结果越准确，但是相应的计算资源也会消耗更多。
    3. 展开器（`expansion operator`）
        - 当使用上述滑动窗查找图片中哪些地方有字时，通常使用很小的滑动窗，通常导致最终的结果是对小字符的识别（而不是对整串字符的识别）。展开器，将正例对象周围的若干个像素判为正例，以将小的正例区域连接成大片的正例区域，达成识别该区域内有文字的目的。

### `Character segmentation`
- 字符切分流程以上一个流程得到的一个子图片为原材料，并将其切分成多个单个字符的子图片。
- 字符切分的本质也是`滑动窗`+`分类器`：
  1. 首先需要一个这样的分类器：正例（图片中有字符的分界）和负例（图片中没有字符的分界，如空白图片或者只包含一个字符的图片）。在准备好训练集后，使用上述训练集训练一个有监督学习的分类器（比如一个神经网络的分类器）
  2. 其次需要一个一维滑动窗。与上述滑动窗概念相同，使用一个一维滑动窗和一定的步长沿着子图片滑动，判定是正例（有分界）还是负例（没有分界）。完成后，使用正例将长条状的子图片切分成多个字符串的小图片，以进行后续的字符分类。

### `Character Classification`
- 使用分类器对字符进行分类

# 人工数据合成
- 人工数据合成的两种方式
  - 创造数据
  - 从已有数据创造变体
- 什么情况下引入人工的噪声（或者扭曲）是有用的
  - 引入的噪声或者是扭曲应该能去代表测试集中发生的噪声或者扭曲。你想在什么噪声场景下应用你的模型，那在训练时就可以刻意的添加相应的背景噪声。
  - 纯随机的、无意义的噪声通常对模型的训练没有帮助。
- 人工合成数据之前，不妨考虑两个问题
  1. 我的模型是不是`low bias`，如果不是，再多数据也没用
  2. 如果我要获得十倍于当前数据的数据量，那么我自己（及团队）手动打标签需要多长时间？如果不长就做吧。

# `Ceiling analysis : What part of the pipeline to work on next`
- 基本思路：针对一个机器学习问题中的几个模块（不管是串联还是并联），分别将其提升至完美水平（比如用人为的方式将其输出结果调至100%正确），观察这一操作对最终结果的影响（也就是如果这个模块完美了，它对整个模型的影响的天花板在哪里）。如果影响较大，那么该模块应该是优先优化的对象。
